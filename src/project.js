require=function t(e,i,n){function o(s,c){if(!i[s]){if(!e[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(r)return r(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var l=i[s]={exports:{}};e[s][0].call(l.exports,function(t){var i=e[s][1][t];return o(i?i:t)},l,l.exports,t,e,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({"greiner-hormann":[function(t,e,i){"use strict";cc._RFpush(e,"4d657MT09hIZZCuv7K7Qs6B","greiner-hormann");var n=function(t,e){1===arguments.length&&(Array.isArray(t)?(e=t[1],t=t[0]):(e=t.y,t=t.x)),this.x=t,this.y=e,this.next=null,this.prev=null,this._corresponding=null,this._distance=0,this._isEntry=!0,this._isIntersection=!1,this._visited=!1};n.createIntersection=function(t,e,i){var o=new n(t,e);return o._distance=i,o._isIntersection=!0,o._isEntry=!1,o},n.prototype.visit=function(){this._visited=!0,null===this._corresponding||this._corresponding._visited||this._corresponding.visit()},n.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},n.prototype.isInside=function(t){var e=!1,i=t.first,n=i.next,o=this.x,r=this.y;do(i.y<r&&n.y>=r||n.y<r&&i.y>=r)&&(i.x<=o||n.x<=o)&&(e^=i.x+(r-i.y)/(n.y-i.y)*(n.x-i.x)<o),i=i.next,n=i.next||t.first;while(!i.equals(t.first));return e};var o=function(t,e,i,n){this.x=0,this.y=0,this.toSource=0,this.toClip=0;var o=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);0!==o&&(this.toSource=((n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x))/o,this.toClip=((e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x))/o,this.valid()&&(this.x=t.x+this.toSource*(e.x-t.x),this.y=t.y+this.toSource*(e.y-t.y)))};o.prototype.valid=function(){return 0<this.toSource&&this.toSource<1&&0<this.toClip&&this.toClip<1};var r=function(t,e){this.first=null,this.vertices=0,this._lastUnprocessed=null,this._arrayVertices="undefined"==typeof e?Array.isArray(t[0]):e;for(var i=0,o=t.length;i<o;i++)this.addVertex(new n(t[i]))};r.prototype.addVertex=function(t){if(null==this.first)this.first=t,this.first.next=t,this.first.prev=t;else{var e=this.first,i=e.prev;e.prev=t,t.next=e,t.prev=i,i.next=t}this.vertices++},r.prototype.insertVertex=function(t,e,i){for(var n,o=e;!o.equals(i)&&o._distance<t._distance;)o=o.next;t.next=o,n=o.prev,t.prev=n,n.next=t,o.prev=t,this.vertices++},r.prototype.getNext=function(t){for(var e=t;e._isIntersection;)e=e.next;return e},r.prototype.getFirstIntersect=function(){var t=this._firstIntersect||this.first;do{if(t._isIntersection&&!t._visited)break;t=t.next}while(!t.equals(this.first));return this._firstIntersect=t,t},r.prototype.hasUnprocessed=function(){var t=this._lastUnprocessed||this.first;do{if(t._isIntersection&&!t._visited)return this._lastUnprocessed=t,!0;t=t.next}while(!t.equals(this.first));return this._lastUnprocessed=null,!1},r.prototype.getPoints=function(){var t=[],e=this.first;if(this._arrayVertices){do t.push([e.x,e.y]),e=e.next;while(e!==this.first)}else do t.push({x:e.x,y:e.y}),e=e.next;while(e!==this.first);return t},r.prototype.clip=function(t,e,i){var s,c,a=this.first,h=t.first;do{if(!a._isIntersection)do{if(!h._isIntersection){var l=new o(a,this.getNext(a.next),h,t.getNext(h.next));if(l.valid()){var d=n.createIntersection(l.x,l.y,l.toSource),u=n.createIntersection(l.x,l.y,l.toClip);d._corresponding=u,u._corresponding=d,this.insertVertex(d,a,this.getNext(a.next)),t.insertVertex(u,h,t.getNext(h.next))}}h=h.next}while(!h.equals(t.first));a=a.next}while(!a.equals(this.first));a=this.first,h=t.first,s=a.isInside(t),c=h.isInside(this),e^=s,i^=c;do a._isIntersection&&(a._isEntry=e,e=!e),a=a.next;while(!a.equals(this.first));do h._isIntersection&&(h._isEntry=i,i=!i),h=h.next;while(!h.equals(t.first));for(var p=[];this.hasUnprocessed();){var f=this.getFirstIntersect(),y=new r([],this._arrayVertices);y.addVertex(new n(f.x,f.y));do{if(f.visit(),f._isEntry){do f=f.next,y.addVertex(new n(f.x,f.y));while(!f._isIntersection)}else do f=f.prev,y.addVertex(new n(f.x,f.y));while(!f._isIntersection);f=f._corresponding}while(!f._visited);p.push(y.getPoints())}return 0===p.length&&(s&&p.push(this.getPoints()),c&&p.push(t.getPoints()),0===p.length&&(p=null)),p};var s=function c(t,e,i,n){var o,s=new r(t),c=new r(e),o=s.clip(c,i,n);return o};e.exports={union:function(t,e){return s(t,e,!1,!1)},intersection:function(t,e){return s(t,e,!0,!0)},diff:function(t,e){return s(t,e,!1,!0)},clip:s},cc._RFpop()},{}],"test-boom-script":[function(t,e,i){"use strict";cc._RFpush(e,"32fe3lJ/RpL1q42cY6quhQE","test-boom-script"),cc.Class({"extends":cc.Component,properties:{_manager:null,_firstTimePlayer:!0,_firstTimeBoom:!0,g:-50,_speed:null,_stopMove:!1},init:function(t){this._speed=t,this._manager=cc.director.getCollisionManager(),this._manager.enabled=!0,this._manager.enabledDebugDraw=!0,this._manager.enabledDrawBoundingBox=!0},onCollisionEnter:function(t,e){"player"==t.node.group?this._firstTimePlayer||(this._firstTimePlayer=!1,this._stopMove=!0,this.node.getChildByName("boom-range").active=!0):"ground"==t.node.group&&(this._stopMove=!0,this.node.getChildByName("boom-range").active=!0)},update:function(t){this._stopMove||(this._speed.y+=this.g*t,this.node.position=cc.pAdd(this.node.position,cc.pMult(this._speed,t)))}}),cc._RFpop()},{}],"test-collder-script":[function(t,e,i){"use strict";cc._RFpush(e,"e0f74Uwp8hOUJpofWIDCD6D","test-collder-script"),cc.Class({"extends":cc.Component,editor:{requireComponent:t("test-graphic-helper")},properties:{_manager:null,_greinerHormann:null},onLoad:function(){this._manager=cc.director.getCollisionManager(),this._manager.enabled=!0,this._manager.enabledDebugDraw=!0,this._manager.enabledDrawBoundingBox=!0,this._greinerHormann=t("greiner-hormann")},onCollisionEnter:function(t,e){"boom"==t.node.group&&this.updateCollider(t)},getWorldPoints:function(t){var e=cc.pAdd(t.node.parent.convertToWorldSpaceAR(t.node.position),t.offset),i=[],n=!0,o=!1,r=void 0;try{for(var s,c=t.points[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var a=s.value,h=cc.pAdd(a,e);i.push(h)}}catch(l){o=!0,r=l}finally{try{!n&&c["return"]&&c["return"]()}finally{if(o)throw r}}return i},getNodePoints:function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,c=t[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var a=s.value,h=e.node.convertToNodeSpaceAR(a),l=cc.pSub(h,e.offset);i.push(l)}}catch(d){o=!0,r=d}finally{try{!n&&c["return"]&&c["return"]()}finally{if(o)throw r}}return i},updateCollider:function(t){var e=this,i=this.getWorldPoints(t),n=this.node.getComponents(cc.PolygonCollider),o=!0,r=!1,s=void 0;try{for(var c,a=function(){var t=c.value,n=e.getWorldPoints(t),o=t.offset,r=e._greinerHormann.diff(n,i);if(r){var s=!0,a=!1,h=void 0;try{for(var l,d=r[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){var u=l.value,p=u.splice(0,u.length-1),f=e.getNodePoints(p,t),y=e.node.addComponent(cc.PolygonCollider);y.points=f,y.offset=o,y.world.points=p,e._manager.addCollider(y)}}catch(v){a=!0,h=v}finally{try{!s&&d["return"]&&d["return"]()}finally{if(a)throw h}}e.scheduleOnce(function(){t.isValid&&t.destroy(),this.scheduleOnce(function(){this.node.emit("refresh")}.bind(this),0)}.bind(e),0)}},h=n[Symbol.iterator]();!(o=(c=h.next()).done);o=!0)a()}catch(l){r=!0,s=l}finally{try{!o&&h["return"]&&h["return"]()}finally{if(r)throw s}}t.node.parent.removeFromParent(!0)}}),cc._RFpop()},{"greiner-hormann":"greiner-hormann","test-graphic-helper":"test-graphic-helper"}],"test-graphic-helper":[function(t,e,i){"use strict";cc._RFpush(e,"3825dWtFKxCOZPQyBKus+MQ","test-graphic-helper"),cc.Class({"extends":cc.Component,editor:{executeInEditMode:!0,requireComponent:cc.Graphics,disallowMultiple:!0},properties:{_ctx:null,_polygonComponents:{get:function(){return this.getComponents(cc.PolygonCollider)}}},onLoad:function(){return this._ctx=this.getComponent(cc.Graphics),cc.EDITOR?void this.customUpdate():(this.customUpdate(),void this.node.on("refresh",this.customUpdate,this))},customUpdate:function(){this._ctx.clear();var t=this._polygonComponents;if(t){var e=!0,i=!1,n=void 0;try{for(var o,r=t[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=o.value,c=s.offset,a=s.points;this._ctx.moveTo(a[0].x+c.x,a[0].y+c.y);for(var h=1;h<a.length;h++)this._ctx.lineTo(a[h].x+c.x,a[h].y+c.y);this._ctx.fill()}}catch(l){i=!0,n=l}finally{try{!e&&r["return"]&&r["return"]()}finally{if(i)throw n}}}}}),cc._RFpop()},{}],"test-move-control":[function(t,e,i){"use strict";cc._RFpush(e,"24c04YpfbtNiq1fdEQ3Nd4k","test-move-control"),cc.Class({"extends":cc.Component,editor:{requireComponent:t("test-graphic-helper")},properties:{_manager:null,_greinerHormann:null,_downBlock:!1,_leftBlock:!1,_rightBlock:!1,_upBlock:!1,_left:!1,_right:!1,_staticTouchColliderArray:[],_moveDir:null},onLoad:function(){this._manager=cc.director.getCollisionManager(),this._manager.enabled=!0,this._manager.enabledDebugDraw=!0,this._manager.enabledDrawBoundingBox=!0,this._greinerHormann=t("greiner-hormann"),cc.systemEvent.on("keydown",this.onKeyDown,this),cc.systemEvent.on("keyup",this.onKeyUp,this)},onKeyDown:function(t){switch(t.keyCode){case cc.KEY.left:this._left=!0;break;case cc.KEY.right:this._right=!0}},onKeyUp:function(t){switch(t.keyCode){case cc.KEY.left:this._left=!1;break;case cc.KEY.right:this._right=!1}},onCollisionEnter:function(t,e){"ground"==t.node.group&&(this._staticTouchColliderArray[t.uuid]=t)},onCollisionExit:function(t,e){"ground"==t.node.group&&delete this._staticTouchColliderArray[t.uuid]},getWorldPoints:function(t){var e=cc.pAdd(t.node.parent.convertToWorldSpaceAR(t.node.position),t.offset),i=[],n=!0,o=!1,r=void 0;try{for(var s,c=t.points[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var a=s.value,h=cc.pAdd(a,e);i.push(h)}}catch(l){o=!0,r=l}finally{try{!n&&c["return"]&&c["return"]()}finally{if(o)throw r}}return i},getNodePoints:function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,c=t[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var a=s.value,h=e.node.convertToNodeSpaceAR(a),l=cc.pSub(h,e.offset);i.push(l)}}catch(d){o=!0,r=d}finally{try{!n&&c["return"]&&c["return"]()}finally{if(o)throw r}}return i},getIntersection:function(t){var e=this.getWorldPoints(t),i=this.node.getComponent(cc.PolygonCollider),n=this.getWorldPoints(i),o=(i.offset,this._greinerHormann.intersection(n,e));if(!o)return null;var r=o[0],s=r.splice(0,r.length-1),c=this.getNodePoints(s,i);return c},getPointSide:function(t){return t.x>0&&t.y>0?"right-up":t.x>0&&t.y<0?"right-down":t.x<0&&t.y>0?"left-up":t.x<0&&t.y<0?"left-down":void 0},getPointsEdge:function(t,e){var i=this.getPointSide(e).split("-");return e.x==t.x?i[0]:e.y==t.y?i[1]:void 0},analysisBlock:function(){var t=[],e=Object.keys(this._staticTouchColliderArray),i=!0,n=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var c=r.value,a=this._staticTouchColliderArray[c];if(a.isValid){var h=this.getIntersection(a);h&&t.push(h)}}}catch(l){n=!0,o=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(n)throw o}}var d=[],u=this.getComponent(cc.PolygonCollider).points,p=!0,f=!1,y=void 0;try{for(var v,g=t[Symbol.iterator]();!(p=(v=g.next()).done);p=!0){var _=v.value,x=[],m=[],w=!0,C=!1,b=void 0;try{for(var P,S=_[Symbol.iterator]();!(w=(P=S.next()).done);w=!0){var k=P.value,B=!1,N=!1,I=!0,A=!1,R=void 0;try{for(var E,T=u[Symbol.iterator]();!(I=(E=T.next()).done);I=!0){var D=E.value;D.x==Math.round(k.x)&&D.y==Math.round(k.y)?(B=!0,x.push({point:D,side:this.getPointSide(D)})):D.x!=Math.round(k.x)&&D.y!=Math.round(k.y)||(N=this.getPointsEdge(k,D))}}catch(l){A=!0,R=l}finally{try{!I&&T["return"]&&T["return"]()}finally{if(A)throw R}}B?B=!1:(m.push({edge:N,point:k}),N=!1)}}catch(l){C=!0,b=l}finally{try{!w&&S["return"]&&S["return"]()}finally{if(C)throw b}}d.push({sideNodePoints:x,surfaceNodePoints:m})}}catch(l){f=!0,y=l}finally{try{!p&&g["return"]&&g["return"]()}finally{if(f)throw y}}var q=!1,M=!0,F=!1,U=void 0;try{for(var V,K=d[Symbol.iterator]();!(M=(V=K.next()).done);M=!0){var W=V.value,O=[],L=!0,H=!1,Y=void 0;try{for(var Q,Z=W.surfaceNodePoints[Symbol.iterator]();!(L=(Q=Z.next()).done);L=!0){var j=Q.value;j.edge&&O.push(j)}}catch(l){H=!0,Y=l}finally{try{!L&&Z["return"]&&Z["return"]()}finally{if(H)throw Y}}if(!(O.length<2)){q||(q=!0,this._leftBlock=!1,this._rightBlock=!1,this._upBlock=!1,this._downBlock=!1);var G=cc.pSub(O[0].point,O[1].point),J=this.checkBlock(W);if(this.hasSide("left-down",W.sideNodePoints)&&this.hasSide("right-down",W.sideNodePoints)&&(this._downBlock=!0),J){var z=cc.pNormalize(G);z.x<0&&(z=cc.pNeg(z)),this._moveDir=z}}}}catch(l){F=!0,U=l}finally{try{!M&&K["return"]&&K["return"]()}finally{if(F)throw U}}0==Object.keys(this._staticTouchColliderArray).length&&(this._downBlock=!1)},fixPosition:function(t,e){var i=(t.sideNodePoints,t.surfaceNodePoints,cc.pMult(cc.pAdd(e[0].point,e[1].point),.25));i.mag()>this.node.height/2&&(this.node.position=cc.pAdd(this.node.position,i))},checkBlock:function(t){for(var e=t.sideNodePoints,i=t.surfaceNodePoints,n=!0,o=0;o<i.length-1;o++){var r=i[o].point,s=i[o+1].point,c=cc.pSub(r,s),a=180*cc.pToAngle(c)/Math.PI;a<0&&(a+=180),a<=90&&a>75&&this.hasSide("right-down",e)&&(this._rightBlock=!0,n=!1),a>=90&&a<105&&this.hasSide("left-down",e)&&(this._leftBlock=!0,n=!1),a<=90&&a>75&&this.hasSide("left-up",e)&&(this._leftBlock=!0,n=!1),a>=90&&a<105&&this.hasSide("right-up",e)&&(this._rightBlock=!0,n=!1)}return n},hasSide:function(t,e){var i=!0,n=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var c=r.value;if(t==c.side)return!0}}catch(a){n=!0,o=a}finally{try{!i&&s["return"]&&s["return"]()}finally{if(n)throw o}}return!1},getFirstInnerPoint:function(t){var e=!0,i=!1,n=void 0;try{for(var o,r=t[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=o.value;if(0==t.edge)return s}}catch(c){i=!0,n=c}finally{try{!e&&r["return"]&&r["return"]()}finally{if(i)throw n}}},update:function(){this._downBlock&&(this._right&&!this._rightBlock&&(this.node.position=cc.pAdd(this.node.position,this._moveDir)),this._left&&!this._leftBlock&&(this.node.position=cc.pAdd(this.node.position,cc.pNeg(this._moveDir)))),this._downBlock||(this.node.y-=1),this.analysisBlock()}}),cc._RFpop()},{"greiner-hormann":"greiner-hormann","test-graphic-helper":"test-graphic-helper"}],"throw-boom-control":[function(t,e,i){"use strict";cc._RFpush(e,"19496PMxc9PxaNFCPRCADEH","throw-boom-control"),cc.Class({"extends":cc.Component,properties:{boomPrefab:cc.Prefab,_polygonComp:{get:function(){return this.node.getComponent(cc.PolygonCollider)}},_points:null,_throwReady:!1},onLoad:function(){this._points=this._polygonComp.points,cc.find("Canvas").on("touchstart",this.onTouchStart,this),cc.find("Canvas").on("touchcancel",this.onRelease,this),cc.find("Canvas").on("touchend",this.onRelease,this)},onTouchStart:function(t){var e=this.check(t.getLocation());e&&(this._throwReady=!0)},onRelease:function(t){if(this._throwReady){this._throwReady=!1;var e=this.node.parent.convertToWorldSpaceAR(this.node.position),i=t.getLocation(),n=cc.pSub(e,i),o=cc.instantiate(this.boomPrefab);o.position=cc.pAdd(this.node.position,cc.v2(0,10)),o.parent=this.node.parent,o.getComponent("test-boom-script").init(n)}},check:function(t){var e=this.node,i=e.convertToNodeSpaceAR(t),n=void 0,o=void 0,r=!1,s=this._points.length,c=i.x,a=i.y,h=this._points;for(n=0,o=s-1;n<s;o=n++)h[n].y>a!=h[o].y>a&&c<(h[o].x-h[n].x)*(a-h[n].y)/(h[o].y-h[n].y)+h[n].x&&(r=!r);return r}}),cc._RFpop()},{}]},{},["greiner-hormann","test-boom-script","test-collder-script","test-graphic-helper","test-move-control","throw-boom-control"]);